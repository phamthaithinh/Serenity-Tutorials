var Q$Externals;(function(e){function t(e,t){var n=e.toString();while(n.length<t)n="0"+t;return n}e.zeroPad=t;function n(e){if(e===0)return"0";else if(!e)return"";var n=Math.floor(e/24/60);var r="";if(n>0){r+=n.toString()}var i=t(Math.floor(e%(24*60)/60),2)+":"+t(e%60,2);if(i!="00:00"){if(n>0)r+=".";r+=i}return r}e.formatDayHourAndMin=n;function r(e){if(e==null)return"";var t=function(e){return(e<10?"0":"")+e};var n=e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes());var r=Number(e.getUTCSeconds()+"."+(e.getUTCMilliseconds()<100?"0":"")+t(e.getUTCMilliseconds()));n+=":"+t(r)+"Z";return n}e.formatISODateTimeUTC=r;function i(e,t,n,r){var i="-";if(isNaN(e)){return null}var o="";if(t.indexOf(".")>-1){var l=n;var s=t.substring(t.lastIndexOf(".")+1);e=a(e,s.length);var u=e%1;var d=new String(u.toFixed(s.length));d=d.substring(d.lastIndexOf(".")+1);for(var f=0;f<s.length;f++){if(s.charAt(f)=="#"&&d.charAt(f)!="0"){l+=d.charAt(f);continue}else if(s.charAt(f)=="#"&&d.charAt(f)=="0"){var c=d.substring(f);if(c.match("[1-9]")){l+=d.charAt(f);continue}else break}else if(s.charAt(f)=="0")l+=d.charAt(f);else l+=s.charAt(f)}o+=l}else e=Math.round(e);var h=Math.floor(e);if(e<0)h=Math.ceil(e);var g="";if(t.indexOf(".")==-1)g=t;else g=t.substring(0,t.indexOf("."));var p="";if(!(h==0&&g.substr(g.length-1)=="#")){var v=new String(Math.abs(h));var m=9999;if(g.lastIndexOf(",")!=-1)m=g.length-g.lastIndexOf(",")-1;var $=0;for(var f=v.length-1;f>-1;f--){p=v.charAt(f)+p;$++;if($==m&&f!=0){p=r+p;$=0}}if(g.length>p.length){var y=g.indexOf("0");if(y!=-1){var x=g.length-y;var b=g.length-p.length-1;while(p.length<x){var w=g.charAt(b);if(w==",")w=r;p=w+p;b--}}}}if(!p&&g.indexOf("0",g.length-1)!==-1)p="0";o=p+o;if(e<0)o=i+o;if(o.lastIndexOf(n)==o.length-1){o=o.substring(0,o.length-1)}return o}e.formatNumber=i;function a(e,t){var n=Math.pow(10,t||0);var r=(Math.round(e*n)/n).toString();if(t>0){var i=r.indexOf(".");if(i==-1){r+=".";i=0}else{i=r.length-(i+1)}while(i<t){r+="0";i++}}return parseFloat(r)}var o=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;function l(e){e=Q.trim(e.toString());var t=Q$Culture.get_groupSeperator();if(e&&e.length&&e.indexOf(t)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+t+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!/^[-\+]?\d+$/.test(e))return NaN;return parseInt(e,10)}function s(e,t){if(!e||!e.length)return null;var n;var r;var i,a,o;r=d(e);if(!r)return false;if(r.length==3){t=t||Q$Culture.dateOrder;switch(t){case"dmy":i=parseInt(r[0],10);a=parseInt(r[1],10)-1;o=parseInt(r[2],10);break;case"ymd":i=parseInt(r[2],10);a=parseInt(r[1],10)-1;o=parseInt(r[0],10);break;case"mdy":default:i=parseInt(r[1],10);a=parseInt(r[0],10)-1;o=parseInt(r[2],10);break}if(isNaN(i)||isNaN(a)||isNaN(o)||i<1||i>31||a<0||a>11||o>9999||o<0)return false;if(o<100){var l=(new Date).getFullYear();var s=l%100+10;o+=l-l%100+(o<=s?0:-100)}try{n=new Date(o,a,i);if(isNaN(n.getFullYear()))return false}catch(u){return false}}else if(r.length==1){try{n=new Date(r[0]);if(isNaN(n.getFullYear()))return false}catch(u){return false}}return n}e.parseDate=s;function u(e){e=Q.trim(e.toString());var t=Q$Culture.get_groupSeperator();if(e&&e.length&&e.indexOf(t)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+t+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!new RegExp("^\\s*([-\\+])?(\\d*)\\"+Q$Culture.decimalSeparator+"?(\\d*)\\s*$").test(e))return NaN;return parseFloat(e.toString().replace(Q$Culture.decimalSeparator,"."))}e.parseDecimal=u;function d(e){e=Q.trim(e);if(!e.length)return;if(e.indexOf("/")>=0)return e.split("/");else if(e.indexOf(".")>=0)return e.split(".");else if(e.indexOf("-")>=0)return e.split("-");else if(e.indexOf("\\")>=0)return e.split("\\");else return[e]}e.splitDateString=d;function f(e){if(!e||!e.length)return null;var t=Date.parse(e);if(!isNaN(t)&&typeof t=="Date")return t;e=e+"";if(typeof e!="string"||e.length===0){return null}var n=e.match(o);if(typeof n=="undefined"||n===null){return null}var r,i,a,l,s,u,d;r=parseInt(n[1],10);if(typeof n[2]=="undefined"||n[2]===""){return new Date(r)}i=parseInt(n[2],10)-1;a=parseInt(n[3],10);if(typeof n[4]=="undefined"||n[4]===""){return new Date(r,i,a)}l=parseInt(n[4],10);s=parseInt(n[5],10);u=typeof n[6]!="undefined"&&n[6]!==""?parseInt(n[6],10):0;if(typeof n[7]!="undefined"&&n[7]!==""){d=Math.round(1e3*parseFloat("0."+n[7]))}else{d=0}if((typeof n[8]=="undefined"||n[8]==="")&&(typeof n[9]=="undefined"||n[9]==="")){return new Date(r,i,a,l,s,u,d)}var f;if(typeof n[9]!="undefined"&&n[9]!==""){f=parseInt(n[10],10)*36e5;if(typeof n[11]!="undefined"&&n[11]!==""){f+=parseInt(n[11],10)*6e4}if(n[9]=="-"){f=-f}}else{f=0}return new Date(Date.UTC(r,i,a,l,s,u,d)-f)}e.parseISODateTime=f;function c(e){var t=Q.trim(e);if(t.length<4||t.length>5)return NaN;var n,r;if(t.charAt(1)==":"){n=l(t.substr(0,1));r=l(t.substr(2,2))}else{if(t.charAt(2)!=":")return NaN;n=l(t.substr(0,2));r=l(t.substr(3,2))}if(isNaN(n)||isNaN(r)||n<0||n>23||r<0||r>59)return NaN;return n*60+r}e.parseHourAndMin=c;function h(e){var t;var n=Q.trim(e);if(!n)return NaN;var r=n.split(".");if(r.length==0||r.length>2)return NaN;if(r.length==1){t=l(r[0]);if(!isNaN(t))return t*24*60;return c(r[0])}else{t=l(r[0]);var i=c(r[1]);if(isNaN(t)||isNaN(i))return NaN;return t*24*60+i}}e.parseDayHourAndMin=h;function g(e){var t;if(arguments.length==0)t=location.search.substring(1,location.search.length);else t=e||"";var n={};var r=t.split("&");for(var i=0;i<r.length;i++){var a=r[i].split("=");var o=decodeURIComponent(a[0]);n[o]=a.length>=2?decodeURIComponent(a[1]):o}return n}e.parseQueryString=g;var p;function v(e,t){var n="AaBbCcÇçFfGgĞğHhIıİiJjKkLlMmNnOoÖöPpRrSsŞşTtUuÜüVvYyZz";e=e||"";t=t||"";if(e==t)return 0;if(!p){p={};for(var r=0;r<n.length;r++){p[n.charAt(r)]=r+1}}for(var i=0,a=Math.min(e.length,t.length);i<a;i++){var o=e.charAt(i),l=t.charAt(i);if(o===l)continue;var s=p[o],u=p[l];if(s!=null&&u!=null)return s<u?-1:1;var d=o.localeCompare(l);if(d==0)continue;return d}return e.localeCompare(t)}e.turkishLocaleCompare=v;function m(e){if(!e)return e;return e.replace(/i/g,"İ").replace(/ı/g,"I").toUpperCase()}e.turkishLocaleToUpper=m;function y(e,t){var n;t=$.extend({htmlEncode:true,okButton:Q.text("Dialogs.OkButton"),title:Q.text("Dialogs.AlertTitle"),onClose:null,onOpen:null,autoOpen:false,dialogClass:"s-MessageDialog s-AlertDialog",modal:true,width:"40%",maxWidth:"450",minWidth:"180",resizable:false,open:function(){if(t.onOpen)t.onOpen.call(this)},close:function(){n.dialog("destroy");if(t.onClose)t.onClose()}},t);if(t.htmlEncode)e=Q.htmlEncode(e);if(!t.buttons){var r=[];r.push({text:t.okButton,click:function(){n.dialog("close")}});t.buttons=r}n=$('<div><div class="message"></div></div>').dialog(t).children(".message").html(e).parent().dialog("open")}e.alertDialog=y;function x(e,t,n){var r;n=$.extend({htmlEncode:true,yesButton:Q.text("Dialogs.YesButton"),noButton:Q.text("Dialogs.NoButton"),title:Q.text("Dialogs.ConfirmationTitle"),onNo:null,onCancel:null,onClose:null,autoOpen:false,modal:true,dialogClass:"s-MessageDialog s-ConfirmDialog",width:"40%",maxWidth:"450",minWidth:"180",resizable:false,open:function(){if(n.onOpen)n.onOpen.call(this)},close:function(){r.dialog("destroy");if(!i&&n.onCancel)n.onCancel()},overlay:{opacity:.7,background:"black"}},n);if(n.htmlEncode)e=Q.htmlEncode(e);var i=false;if(!n.buttons){var a=[];a.push({text:n.yesButton,click:function(){i=true;r.dialog("close");if(t)t()}});if(n.noButton)a.push({text:n.noButton,click:function(){i=true;r.dialog("close");if(n.onNo)n.onNo();else if(n.onCancel)n.onCancel()}});n.buttons=a}r=$('<div><div class="message"></div></div>').dialog(n).children(".message").html(e).parent().dialog("open")}e.confirmDialog=x;function b(e){var t;var n=$("<div><iframe></iframe></div>");var r=$.extend({autoOpen:true,modal:true,width:"60%",height:"400",title:Q.text("Dialogs.AlertTitle"),open:function(){t=n.find("iframe").css({border:"none",width:"100%",height:"100%"})[0].contentDocument;t.open();t.write(r.html);t.close()},close:function(){t.open();t.write("");t.close();n.dialog("destroy").html("")}},e);n.dialog(r)}e.iframeDialog=b;function w(){var e=null;var t=0;$(document).ajaxStart(function(){window.clearTimeout(t);t=window.setTimeout(function(){if(!e)e=$("<div/>").addClass("s-AjaxIndicator").appendTo(document.body)},2e3)}).ajaxStop(function(){if(e){e.remove();e=null}window.clearTimeout(t)})}e.setupAjaxIndicator=w;function N(e){if(e==null)return null;if(typeof e=="number")return e;e=$.trim(e);if(e==null||!e.length)return null;if(e.length>=15)return e;return parseInt(e,10)}e.toId=N;var C;function I(e,t){C.call(this,e,t);this.errorsFor(e).each(function(e,t){$(t).attr("title",$(t).text())})}function A(){Serenity.CustomValidation.registerValidationMethods();var t=$.validator;C=t.showLabel;t.showLabel=I;jQuery.validator.addMethod("xss",function(e,t){if(e.length==0)return true;var n=0;while(true){var r=e.indexOf("&",n);if(r<0)r=e.indexOf("<",n);if(r<0)return true;if(r==e.length-1)return true;var i=e.charAt(r);var a=e.charAt(r+1);if(i!="&"){if(i=="<"&&(a>="a"&&a<="z"||a>="A"&&a<="Z"||a=="!"||a=="/"))return false}else if(a=="#")return false;n=r+1}});$.validator.addMethod("dateQ",function(t,n){return this.optional(n)||e.parseDate(t)!=false});$.validator.addMethod("hourAndMin",function(e,t){return this.optional(t)||!isNaN(c(e))});$.validator.addMethod("dayHourAndMin",function(e,t){return this.optional(t)||!isNaN(h(e))});$.validator.addMethod("decimalQ",function(e,t){return this.optional(t)||!isNaN(u(e))});$.validator.addMethod("integerQ",function(e,t){return this.optional(t)||!isNaN(l(e))});var n=$.validator.methods["email"];$.validator.addMethod("email",function(e,t){if(!Q$Config.emailAllowOnlyAscii)return n.call(this,e,t);return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)});$.validator.addMethod("emailMultiple",function(e,t){var n=this.optional(t);if(n)return n;if(e.indexOf(";")>=0)e=e.split(";");else e=e.split(",");for(var r=0;r<e.length;r++){n=$.validator.methods["email"].call(this,e[r],t);if(!n)return n}return n});$.validator.addMethod("anyvalue",function(e,t){return true});var r=$.validator.defaults;r.ignoreTitle=true;r.onchange=function(e){this.element(e)};t.oldinit=t.init;t.init=function(){t.oldinit.call(this);function e(e){if(this.form==null)return;var t=$.data(this.form,"validator"),n="on"+e.type.replace(/^validate/,"");t&&t.settings[n]&&t.settings[n].call(t,this)}function n(t){var n=this[0];if(!$.data(n,"changebound")){$(n).change(e);$.data(n,"changebound",true)}}$(this.currentForm).on(":text, :password, :file, select, textarea","focusin.validate",n)};t.oldfocusInvalid=t.focusInvalid;t.focusInvalid=function(){if(this.settings.abortHandler)this.settings.abortHandler(this);this.oldfocusInvalid.call(this)};t.oldstopRequest=t.focusInvalid;t.stopRequest=function(e,t){var n=this.formSubmitted;this.oldfocusInvalid.call(this,[e,t]);if(!t&&this.pendingRequest==0&&n&&this.settings.abortHandler){this.settings.abortHandler(this)}};t.resetAll=function(){this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)};jQuery(function(){$.extend($.validator.messages,{email:Q.text("Validation.Email"),required:Q.text("Validation.Required"),minlength:Q.text("Validation.MinLength"),maxlength:Q.text("Validation.MaxLength"),digits:Q.text("Validation.Digits"),range:Q.text("Validation.Range"),xss:Q.text("Validation.Xss"),dateQ:Q.text("Validation.DateInvalid"),decimalQ:Q.text("Validation.Decimal"),integerQ:Q.text("Validation.Integer"),url:Q.text("Validation.Url")})})}function O(e){e.settings.abortHandler=null;e.settings.submitHandler=function(){return false}}e.validatorAbortHandler=O;function D(e){return $.extend({ignore:":hidden",meta:"v",errorClass:"error",errorPlacement:function(e,t){var n=null;var r=t.attr("data-vx-id");if(r){n=$("#"+r);if(!n.length)n=null;else n=n[0]}if(n==null){n=t.parents("div.field");if(n.length){var i=$("div.vx",n[0]);if(i.length)n=i[0]}else n=t.parent()}e.appendTo(n)},submitHandler:function(){return false},invalidHandler:function(){Q.notifyError(Q.text("Validation.InvalidFormMessage"))},success:function(e){e.addClass("checked")}},e)}e.validateOptions=D;if(window["jQuery"]&&window["jQuery"]["validator"])A();else if(window["jQuery"]){jQuery(function(e){if(e.validator)A()})}function T(){var e=Q$Culture.dateOrder;var t=Q$Culture.dateSeparator;var n=($("html").attr("lang")||"en").toLowerCase();if(!$.datepicker.regional[n]){n=n.split("-")[0];if(!$.datepicker.regional[n]){n="en"}}$.datepicker.setDefaults($.datepicker.regional["en"]);$.datepicker.setDefaults($.datepicker.regional[n]);$.datepicker.setDefaults({dateFormat:e=="mdy"?"mm"+t+"dd"+t+"yy":e=="ymd"?"yy"+t+"mm"+t+"dd":"dd"+t+"mm"+t+"yy",buttonImage:Q.resolveUrl("~/content/serenity/images/datepicker.png"),buttonImageOnly:true,showOn:"both",showButtonPanel:true,changeMonth:true,changeYear:true})}if(window["jQuery"]&&window["jQuery"]["datepicker"]&&window["jQuery"]["datepicker"]["regional"]&&window["jQuery"]["datepicker"]["regional"]["en"])T();else jQuery(function(e){if(e.datepicker)T()});function M(){$.ui.dialog.prototype._allowInteraction=function(e){if($(e.target).closest(".ui-dialog").length){return true}return!!$(e.target).closest(".ui-datepicker, .select2-drop, .cke, .cke_dialog, #support-modal").length}}if(window["jQuery"]&&window["jQuery"]["ui"])M();else jQuery(function(e){if(window["jQuery"]["ui"])M()});function k(e){var t=$("<form/>").attr("method","POST").attr("action",e.url?Q.resolveUrl(e.url):Q.resolveUrl("~/services/"+e.service)).appendTo(document.body);if(e.target)t.attr("target",e.target);var n=$("<div/>").appendTo(t);$("<input/>").attr("type","hidden").attr("name","request").val($["toJSON"](e.request)).appendTo(n);$("<input/>").attr("type","submit").appendTo(n);t.submit();window.setTimeout(function(){t.remove()},0)}e.postToService=k;function S(e){var t=$("<form/>").attr("method","POST").attr("action",Q.resolveUrl(e.url)).appendTo(document.body);if(e.target)t.attr("target",e.target);var n=$("<div/>").appendTo(t);if(e.params!=null){for(var r in e.params){$("<input/>").attr("type","hidden").attr("name",r).val(e.params[r]).appendTo(n)}}$("<input/>").attr("type","submit").appendTo(n);t.submit();window.setTimeout(function(){t.remove()},0)}e.postToUrl=S;function j(){ss.Exception.prototype.toString=function(){return this.get_message()}}if(ss&&ss.Exception)j();else jQuery(function(e){if(ss&&ss.Exception)j()});function U(e){var t=screen.availHeight-60;var n=screen.availWidth-10;var r=(screen.availWidth-n)/2-5;if(r<0)r=0;var i=(screen.availHeight-t)/2-25;if(i<0)i=0;var a=window.open("","","status=0, toolbar=0, width="+n+", height="+t+", scrollbars=1, resizable=yes, left="+r+", top="+i);a.document.body.innerHTML=e}e.showInFrame=U;if($.fn.button&&$.fn.button.noConflict){var E=$.fn.button.noConflict();$.fn.btn=E}function H(t,n){var r,i,a,o,l,s,u=arguments[0]||{},d=1,f=arguments.length;if(typeof u!=="object"&&!$.isFunction(u)){u={}}if(d===f){u={};d=0}for(;d<f;d++){if((r=arguments[d])!==null){if($.isArray(r)){u=$.extend(true,[],r)}else{for(i in r){a=u[i];o=r[i];if(u===o){continue}if(o&&($.isPlainObject(o)||(l=$.isArray(o)))){if(l){l=false;s=a&&$.isArray(a)?a:[]}else{s=a&&$.isPlainObject(a)?a:{}}u[i]=e.deepClone(s,o)}else if(o!==undefined){u[i]=o}}}}}return u}e.deepClone=H})(Q$Externals||(Q$Externals={}));